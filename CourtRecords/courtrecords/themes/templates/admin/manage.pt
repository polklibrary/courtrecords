<metal:page
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    use-macro="load: master.pt">
    
    <tal:block metal:fill-slot="css">
    </tal:block>
    
    <tal:block metal:fill-slot="js">
        <script></script>
    </tal:block>
    
    <tal:block metal:fill-slot="content">
        
        <div id="manage-home">
        
            <div class="container">
                <h3>Orders</h3>
                <div class="content">
                    <label>Open: </label> ${orders_open}
                    <br />
                    <label>Completed: </label> ${orders_closed}
                </div>
            </div>

       
            <div class="container">
                <h3>Data Indexed</h3>
                <div class="content">
                    <label>Cases: </label> ${cases_count} indexed
                    <br />
                    <label>Entities: </label> ${entities_count} indexed
                    <br />
                    <label>ActionTypes: </label> ${actiontypes_count} indexed
                    <br />
                    <label>Counties: </label> ${counties_count} indexed
                    <br />
                    <label>Roles: </label> ${roles_count} indexed
                </div>
            </div>
            
            
        
            <div class="container">
                <h3>Issues/Problems</h3>
                <div class="content">

                    <label>Cases with year issues: </label> 
                    <ul>
                        <li tal:repeat="ob problems.case_year_issues">
                            <a href="${request.application_url}/manage/records/${ob.id}">Case year is ${ob.year}</a>
                        </li>
                        <li tal:condition="not: problems.case_year_issues">
                            No problems found
                        </li>
                    </ul>
                    
                    <label>Cases with no county assigned: </label> 
                    <ul>
                        <li tal:repeat="ob problems.case_no_county">
                            <a href="${request.application_url}/manage/records/${ob.id}">Case #${ob.id} has no county</a>
                        </li>
                        <li tal:condition="not: problems.case_no_county">
                            No problems found
                        </li>
                    </ul>
                    
                    <label>Cases with no actiontype assigned: </label> 
                    <ul>
                        <li tal:repeat="ob problems.case_no_actiontype">
                            <a href="${request.application_url}/manage/records/${ob.id}">Case #${ob.id} has no actiontype</a>
                        </li>
                        <li tal:condition="not: problems.case_no_actiontype">
                            No problems found
                        </li>
                    </ul>
                    
                    <div tal:condition="nothing">
                    <label>Cases with no case number: </label> 
                    <ul>
                        <li tal:repeat="ob problems.case_no_case_number">
                            <a href="${request.application_url}/manage/records/${ob.id}">Case #${ob.id} has no case number</a>
                        </li>
                        <li tal:condition="not: problems.case_no_case_number">
                            No problems found
                        </li>
                    </ul>
                    </div>
                    
                    <label>Entities with no case assignments: </label> 
                    <ul>
                        <li tal:repeat="ob problems.entities_no_case">
                            <a href="${request.application_url}/manage/entities">Entity #${ob.id} has no case</a>
                        </li>
                        <li tal:condition="not: problems.entities_no_case">
                            No problems found
                        </li>
                    </ul>
                    
                    <label>Entities with prefix issues: </label> 
                    <ul>
                        <li tal:repeat="ob problems.entities_no_prefix">
                            <a href="${request.application_url}/manage/records/${ob.case_id}">Entities prefix has no index</a>
                        </li>
                        <li tal:condition="not: problems.entities_no_prefix">
                            No problems found
                        </li>
                    </ul>
                    
                    <label>Entities with suffix issues: </label> 
                    <ul>
                        <li tal:repeat="ob problems.entities_no_suffix">
                            <a href="${request.application_url}/manage/records/${ob.case_id}">Entities suffix has no index</a>
                        </li>
                        <li tal:condition="not: problems.entities_no_suffix">
                            No problems found
                        </li>
                    </ul>
                    
                    <label>Entities with role issues: </label> 
                    <ul>
                        <li tal:repeat="ob problems.entities_no_role">
                            <a href="${request.application_url}/manage/records/${ob.case_id}">Entities has no role</a>
                        </li>
                        <li tal:condition="not: problems.entities_no_role">
                            No problems found
                        </li>
                    </ul>
                    
                </div>
            </div>
       
            
            <div class="clear"></div>
        </div>
        
    </tal:block>
     
</metal:page>